---
title: Solar Dataset Query
summary: Returns information on the closest climate data for a location.
url: GET /api/solar/data_query/v1
disqus: true

---

# <%= current_page.data.title %> <span class="url">(<%= current_page.data.url %>)</span>
<%= current_page.data.summary %>

<ul id="toc"></ul>

## Request URL

<pre>GET /api/solar/data_query/v1<em>.format?parameters</em></pre>

## Request Parameters

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Parameter</th>
      <th class="doc-parameters-required" scope="col">Required</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">format</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> string
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Options:</strong> <em>json</em>, <em>xml</em>, <em>csv</em>
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>The output response format.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">api_key</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> string
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>Your developer API key. See <a href="/docs/api-key/">API keys</a> for more information.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">address</th>
      <td class="doc-parameter-required">Depends</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> string
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
      </td>
      <td class="doc-parameter-description">The address to use (lat/lon returned by Google's geocoding service). Required if lat/lon not specified.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lat</th>
      <td class="doc-parameter-required">Depends</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> decimal
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> <i>-90</i>
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> <i>90</i>
        </div>
      </td>
      <td class="doc-parameter-description">The latitude for the location to use. Required if address not specified.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lon</th>
      <td class="doc-parameter-required">Depends</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> decimal
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> <i>-180</i>
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> <i>180</i>
        </div>
      </td>
      <td class="doc-parameter-description">The longitude for the location to use. Required if address not specified.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">radius</th>
      <td class="doc-parameter-required">No</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> integer
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> 100
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> 0
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> 2000
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>The search radius to use when searching for climate data stations (miles). Pass in radius=0 to find the closest stations regardless of the distance. A value greater than 0 is required when using in combination with all=1.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">all</th>
      <td class="doc-parameter-required">No</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> integer
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> 0
        </div>
        <div class="doc-parameter-value-field">
          <strong>Options:</strong> <i>0, 1</i>
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>Return all stations within the radius. The closest stations will still be returned individually.</p>
      </td>
    </tr>
  </tbody>
</table>

## Response Fields

The response is composed of service-related informational fields and information about the closest climate data files.

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Field</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">inputs</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">The input parameters received in the request.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">errors</th>
      <td class="doc-parameter-value"><strong>Type:</strong> array of strings</td>
      <td class="doc-parameter-description">Any error messages resulting from the request.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">warnings</th>
      <td class="doc-parameter-value"><strong>Type:</strong> array of strings</td>
      <td class="doc-parameter-description">Any warning messages resulting from the request. This includes messages regarding data not being found for one or more datasets.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">version</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The current version of the web service.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">metadata</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">Any metadata associated with the request (sources, etc)</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">outputs</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">
        <p>Information about the climate data files for each supported dataset. (see <a href="#output-fields">output fields</a> for more detail)</p>
        <table border="0" cellpadding="0" cellspacing="0" class="doc-parameter-options">
          <thead>
            <tr>
              <th scope="col">Dataset</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">tmy2</th>
              <td>
                TMY2 station data (see <a href="http://rredc.nrel.gov/solar/old_data/nsrdb/1961-1990/tmy2/State.html" target="_blank">Typical Meteorological Year, version 2</a>)
              </td>
            </tr>
            <tr>
              <th scope="row">tmy3</th>
              <td>
                TMY3 station data (see <a href="http://rredc.nrel.gov/solar/old_data/nsrdb/1991-2005/tmy3/by_USAFN.html">Typical Meteorological Year version 3</a>)
              </td>
            </tr>
            <tr>
              <th scope="row">intl</th>
              <td>International station data</td>
            </tr>
            <tr>
              <th scope="row">all_stations</th>
              <td>Information for all stations within the radius (only if all=1 is specified)</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

### Output Fields

The output fields contain the following information regarding climate data files from each supported dataset. If no data is found for a specific dataset, the service will return null for it in the outputs, and return a message in the warnings.

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Field</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">id</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">An identifier for that climate data within the dataset.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lat</th>
      <td class="doc-parameter-value"><strong>Type:</strong> decimal</td>
      <td class="doc-parameter-description">The latitude of the station.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lon</th>
      <td class="doc-parameter-value"><strong>Type:</strong> decimal</td>
      <td class="doc-parameter-description">The longitude of the station.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">city</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The city where the station is located.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">state</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The state where the station is located.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">timezone</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The timezone of the station, relative to GMT.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">elevation</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The elevation of the station in meters.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">distance</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The distance in meters from the input location to the station.</td>
    </tr>
  </tbody>
</table>

## Examples

### JSON Output Format

<pre>GET <a href="http://developer.nrel.gov/api/solar/data_query/v1.json?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=50&amp;all=1">/api/solar/data_query/v1.json?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=50&amp;all=1</a></pre>

```json
{
  "version" : "1.1.1",
  "warnings" : [ "No intl data found for lat=40.0 lon=-105.0" ],
  "errors" : [ ],
  "metadata" : { },
  "inputs" : {
    "lat" : "40",
    "lon" : "-105",
    "radius" : "50",
    "all" : "1"
  },
  "outputs" : {
    "tmy2" : {
      "id" : "0-94018",
      "city" : "BOULDER",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.13,
      "lon" : -105.24,
      "elevation" : 1689,
      "distance" : 24977
    },
    "tmy3" : {
      "id" : "1-724699",
      "city" : "BROOMFIELD/JEFFCO [BOULDER - SURFRAD]",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.13,
      "lon" : -105.24,
      "elevation" : 1689,
      "distance" : 24977
    },
    "intl" : null,
    "all_stations" : [ {
      "id" : "0-94018",
      "city" : "BOULDER",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.13,
      "lon" : -105.24,
      "elevation" : 1689,
      "distance" : 24977,
      "dataset" : "tmy2"
    }, {
      "id" : "1-724699",
      "city" : "BROOMFIELD/JEFFCO [BOULDER - SURFRAD]",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.13,
      "lon" : -105.24,
      "elevation" : 1689,
      "distance" : 24977,
      "dataset" : "tmy3"
    }, {
      "id" : "1-724666",
      "city" : "DENVER/CENTENNIAL [GOLDEN - NREL]",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 39.742,
      "lon" : -105.179,
      "elevation" : 1829,
      "distance" : 32650,
      "dataset" : "tmy3"
    }, {
      "id" : "1-725650",
      "city" : "DENVER INTL AP",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 39.833,
      "lon" : -104.65,
      "elevation" : 1650,
      "distance" : 35063,
      "dataset" : "tmy3"
    }, {
      "id" : "1-724695",
      "city" : "AURORA BUCKLEY FIELD ANGB",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 39.717,
      "lon" : -104.75,
      "elevation" : 1726,
      "distance" : 38143,
      "dataset" : "tmy3"
    }, {
      "id" : "1-724769",
      "city" : "FORT COLLINS (AWOS)",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.45,
      "lon" : -105.017,
      "elevation" : 1529,
      "distance" : 50435,
      "dataset" : "tmy3"
    }, {
      "id" : "1-724768",
      "city" : "GREELEY/WELD (AWOS)",
      "state" : "COLORADO",
      "timezone" : -7,
      "lat" : 40.433,
      "lon" : -104.633,
      "elevation" : 1420,
      "distance" : 57549,
      "dataset" : "tmy3"
    } ]
  }
}
```

### XML Output Format

<pre>GET <a href="http://developer.nrel.gov/api/solar/data_query/v1.xml?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=50&amp;all=1">/api/solar/data_query/v1.xml?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=50&amp;all=1</a></pre>

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <version>1.1.1</version>
    <warnings type="array">
        <warning>No intl data found for lat=40.0 lon=-105.0</warning>
    </warnings>
    <errors type="array"/>
    <metadata/>
    <inputs>
        <lat>40</lat>
        <lon>-105</lon>
        <radius>50</radius>
        <all>1</all>
    </inputs>
    <outputs>
        <tmy2>
            <id>0-94018</id>
            <city>BOULDER</city>
            <state>COLORADO</state>
            <timezone type="integer">-7</timezone>
            <lat type="float">40.13</lat>
            <lon type="float">-105.24</lon>
            <elevation type="integer">1689</elevation>
            <distance type="integer">24977</distance>
        </tmy2>
        <tmy3>
            <id>1-724699</id>
            <city>BROOMFIELD/JEFFCO [BOULDER - SURFRAD]</city>
            <state>COLORADO</state>
            <timezone type="integer">-7</timezone>
            <lat type="float">40.13</lat>
            <lon type="float">-105.24</lon>
            <elevation type="integer">1689</elevation>
            <distance type="integer">24977</distance>
        </tmy3>
        <intl nil="true"/>
        <all-stations type="array">
            <all-station>
                <id>0-94018</id>
                <city>BOULDER</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">40.13</lat>
                <lon type="float">-105.24</lon>
                <elevation type="integer">1689</elevation>
                <distance type="integer">24977</distance>
                <dataset>tmy2</dataset>
            </all-station>
            <all-station>
                <id>1-724699</id>
                <city>BROOMFIELD/JEFFCO [BOULDER - SURFRAD]</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">40.13</lat>
                <lon type="float">-105.24</lon>
                <elevation type="integer">1689</elevation>
                <distance type="integer">24977</distance>
                <dataset>tmy3</dataset>
            </all-station>
            <all-station>
                <id>1-724666</id>
                <city>DENVER/CENTENNIAL [GOLDEN - NREL]</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">39.742</lat>
                <lon type="float">-105.179</lon>
                <elevation type="integer">1829</elevation>
                <distance type="integer">32650</distance>
                <dataset>tmy3</dataset>
            </all-station>
            <all-station>
                <id>1-725650</id>
                <city>DENVER INTL AP</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">39.833</lat>
                <lon type="float">-104.65</lon>
                <elevation type="integer">1650</elevation>
                <distance type="integer">35063</distance>
                <dataset>tmy3</dataset>
            </all-station>
            <all-station>
                <id>1-724695</id>
                <city>AURORA BUCKLEY FIELD ANGB</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">39.717</lat>
                <lon type="float">-104.75</lon>
                <elevation type="integer">1726</elevation>
                <distance type="integer">38143</distance>
                <dataset>tmy3</dataset>
            </all-station>
            <all-station>
                <id>1-724769</id>
                <city>FORT COLLINS (AWOS)</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">40.45</lat>
                <lon type="float">-105.017</lon>
                <elevation type="integer">1529</elevation>
                <distance type="integer">50435</distance>
                <dataset>tmy3</dataset>
            </all-station>
            <all-station>
                <id>1-724768</id>
                <city>GREELEY/WELD (AWOS)</city>
                <state>COLORADO</state>
                <timezone type="integer">-7</timezone>
                <lat type="float">40.433</lat>
                <lon type="float">-104.633</lon>
                <elevation type="integer">1420</elevation>
                <distance type="integer">57549</distance>
                <dataset>tmy3</dataset>
            </all-station>
        </all-stations>
    </outputs>
</response>
```

## Rate Limits

[Standard rate limits](/docs/rate-limits) apply. No more than 1,000 requests may be made in any hour

## Errors

[Standard errors](/docs/errors) may be returned. In addition, the following service-specific errors may be returned:

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">HTTP Status Code</th>
      <th class="doc-parameters-required" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">422</th>
      <td class="doc-parameter-description">Unprocessable Entity - One or more parameters did not pass validation, or a parameter may be missing. Check the errors section of the response to see how the request should be modified to address the error.</td>
    </tr>
  </tbody>
</table>
